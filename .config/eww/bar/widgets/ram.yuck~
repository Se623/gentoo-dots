
(defpoll ram_usage :interval "1s" "bash ~/.config/eww/bar/scripts/usage.bash ram")
(defpoll ram_total :interval "1s" "bash ~/.config/eww/bar/scripts/usage.bash ram-total")
(defvar ram_slider false)

(defwidget ram []
        (box :class "module module-active"
             :hexpand false
             :space-evenly false
             :spacing 5
             (label :class "icon-small"
		    :text "\\ue92e")
             (eventbox :onhover "eww update ram_slider=true"
                       :onhoverlost "eww update ram_slider=false"
		       :tooltip "RAM usage"
                       (box :orientation "v"
                            :space-evenly false
                            (revealer :reveal "${!ram_slider}"
                                      :transition "slidedown"
                                      :halign "end"
                                      (box :orientation "h"
                                           :space-evenly false
                                           :height 40
                                           (label :text "${ram_usage}"
                                                  :valign "center")))
                            (revealer :reveal ram_slider
                                      :transition "slideup"
                                      (box :orientation "h"
                                           :space-evenly false
                                           :height 40
                                           :spacing 5
                                           (scale :max ram_total
                                                  :min 0
                                                  :value ram_usage)))))))

