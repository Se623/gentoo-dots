#!bin/bash

icon() {
icon=$HOME/.config/eww/bar/icons/components/CPU.svg
echo "$icon"
sed -i "s/.st0{fill:none;stroke:#[A-F0-9]*;/.st0{fill:none;stroke:#7DF9FF;/" $icon
sed -i "s/.st1{fill:none;stroke:#[A-F0-9]*;/.st1{fill:none;stroke:#7DF9FF;/" $icon
}

usage() {
mpstat 2 | while read line;
do
    usage=$(echo 100 - $(echo $line | awk '{printf $13}' 2> /dev/null) | bc)
    echo "$usage"
done;
}

[ "$1" = "icon" ] && icon && exit
[ "$1" = "usage" ] && usage && exit
exit
